# 모듈과 패키지

## 모듈

파이썬 파일은 각각 하나의 모듈로 취급된다.

#### \_\_name\_\_변수

**module/lol.py**

```python
import game

print('= Turn on game =')
game.play_game()
shop.buy_item()
```

**module/game.py**

```python
def play_game():
    print('Play game!')

play_game()
```

위와 같은 파일이 있다고 하자. `lol.py`가 실행될 때 `game`이 import 되는 순간 `play_game()` 실행되어 버리는 문제가 생겨서 결과적으로 `play_game`이 두 번 실행되어지게 된다. 이런 문제를 해결하기 위해 단순히 **import** 되어진 경우에는 실행을 막아야 한다. <br><br>

각 모듈은 자신의 이름을 가지며, 모듈 이름은 모듈의 전역변수 `__name__`에서 확인할 수 있다. <br><br>
파이썬 인터프리터가 실행한 모듈의 경우에는 `__main__`이라는 이름을 갖게 되는데, 예를 들어 `lol.py`를 인터프리터로 실행하게 되면 이 때 `lol.py`의 이름은 인터프리터가 실행한 모듈이기 때문에  `__main__` 이고 `game.py`의 이름은 인터프리터가 실행한 모듈이 아니기 때문에 `__main__`이 아닌 다른 이름을 갖게 된다. 따라서 `game.py`의 코드를 다음과 같이 바꿔주면 `lol.py`를 실행했을때 단순히 **import** 되어진 경우에는 `game.py`가 실행되어지지 않는다.

```python
def play_game():
    print('Play game!')

if __name__ == '__main__':
    play_game()
```

---

## 패키지

패키지는 모듈들을 모아 둔 특별한 **폴더**를 뜻한다. (일반적인 폴더와는 다르다)

폴더를 패키지로 만들면 계층 구조를 가질 수 있으며, 모듈들을 해당 패키지에 모을 수 있는 역할을 한다.

패키지를 만들 때는 패키지로 사용할 폴더에 `__init__.py`파일을 넣어주면, 해당 폴더는 패키지로 취급된다. (비어있어도 무관하며, python3에서는 없어도 된다.)

`shop.py`와 `game.py`를 `func`패키지에 넣어본다.

```
├── func
│   ├── __init__.py
│   └── game.py
│  
└── lol.py
```

패키지는 모듈과 동일하게 import할 수 있으며, 위와 같이 func패키지에 모듈들을 넣은 경우에는

`from func import game, shop`으로 기존 코드의 변경 없이 패키지에서 모듈을 가져오는 방식을 사용할 수 있다.

또는 단순히 `import func`후 `func.game`, `func.shop`을 사용하는 방식도 가능하다.

#### *, \_\_all\_\_

패키지에 포함된 하위 패키지 및 모듈을 불러올 때, `*`을 사용하면 해당 모듈의 모든 식별자들을 불러온다. 

이 때, 각 모듈에서 자신이 import될 때 불러와질 목록을 지정하고자 한다면 모듈 내부에 `__all__` 을 정의하면 된다. (`*`로 import 되어질 때 모든 내용을 import 하고자 한다면 굳이 정의할 필요는 없다)

**game.py**

```python
__all__ = (
	'play_game'
)
```

또한, 패키지를 하위의 모든 모듈을 부르기 위해 `*`을 쓸 때 불러와질 목록은 `__init__.py` 안에 `__all__`로 지정하여 주면 된다. ( **모듈이 import 되어질 때와는 다르게** 패키지 하위의 모든 모듈을 부르기 위해 `*`을 쓰는 경우에는 `__init__.py`에 필수로 모든 모듈을 지정하여 주어야 한다.)

**func/__init__.py**

```python
__all__ = (
	'game'
)
```

패키지 자체를 import시에 자동으로 가져오고 싶은 목록이 있다면, 패키지의 `__init__.py`파일에 해당 항목을 import해주면 된다. 

---
